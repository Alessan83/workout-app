<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Workout 100</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#111;color:#eee;padding:15px;text-align:center}
button{padding:8px;margin:6px;background:#222;color:#eee;border:1px solid #444;border-radius:8px}
select{background:#222;color:#eee;border:1px solid #444;padding:6px;border-radius:8px}
.section{margin:15px 0}
.exercise{border:1px solid #333;padding:10px;margin:8px 0;border-radius:10px;text-align:left}
.exercise b{display:block;margin-bottom:4px}
a{color:#4da6ff;text-decoration:none}
small{color:#aaa}
.pill{display:inline-block;padding:2px 8px;border:1px solid #444;border-radius:999px;margin:4px 6px 0 0;font-size:12px}
</style>
</head>
<body>

<h2>Workout 100</h2>

<div>
Allenamento: <span id="workoutType"></span>
</div>

<div style="margin-top:10px">
<select id="mode" onchange="renderProgram();renderStatus();">
  <option value="25">25 minuti</option>
  <option value="35">35 minuti</option>
</select>
</div>

<div id="status" style="margin-top:10px"></div>

<div id="program" style="margin-top:10px"></div>

<div class="section">
  <div id="phase" style="font-weight:bold"></div>
  <div id="timeLeft"></div>
  <button onclick="startPhase()">Start Fase</button>
  <button onclick="nextPhase()">Fase Successiva</button>
</div>

<button onclick="completeWorkout()">Allenamento completato</button>

<script>
// =====================================================
// STORAGE / STATO
// =====================================================

const STORAGE_KEY = "workoutV5";

let data = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {
  startDate: new Date().toISOString().split("T")[0],
  lastDate: null,
  lastWorkout: 0,
  streak: 0,
  completedDate: null,
  categories: {
    pull: { bandLevel: 1, time: 40, streak: 0 },       // 0=Verde,1=Giallo,2=Arancio
    push: { bandLevel: 1, time: 40, streak: 0 },
    posterior: { bandLevel: 1, time: 40, streak: 0 }
  }
};

const BAND_COLORS = ["Verde (leggero)", "Giallo (medio)", "Arancio (alto)"];

// Rotazione giornaliera delle categorie
const workouts = {
  1: ["pull","push","posterior"],
  2: ["push","posterior","pull"],
  3: ["posterior","pull","push"]
};

// =====================================================
// DATABASE ESERCIZI (con link diretto)
// NOTE IMPORTANTI:
// - Esercizi con banda: nessun punto di ancoraggio esterno (solo corpo + banda)
// - Corpo libero: punti d’appoggio solo il corpo
// =====================================================

const exerciseDB = {

  // MOBILITÀ (prima)
  mobility: [
    {name:"Hip CARs", reps:"6 per lato", note:"lento, controllo totale", link:"https://www.youtube.com/results?search_query=Hip+CARs+mobility"},
    {name:"90/90 Hip Switch", reps:"8 per lato", note:"senza slancio", link:"https://www.youtube.com/results?search_query=90+90+hip+switch"},
    {name:"Thoracic Rotation (Quadrupedia)", reps:"8 per lato", note:"espira in rotazione", link:"https://www.youtube.com/results?search_query=thoracic+rotation+quadruped"},
    {name:"Open Book", reps:"8 per lato", note:"movimento ampio", link:"https://www.youtube.com/results?search_query=open+book+thoracic+mobility"},
    {name:"Ankle Rock / Knee to Wall", reps:"10 per lato", note:"tallone giù", link:"https://www.youtube.com/results?search_query=knee+to+wall+ankle+mobility"},
    {name:"Cat-Cow", reps:"8-10", note:"segmenta la colonna", link:"https://www.youtube.com/results?search_query=cat+cow+exercise"},
    {name:"World’s Greatest Stretch", reps:"4 per lato", note:"pausa 2 sec", link:"https://www.youtube.com/results?search_query=worlds+greatest+stretch"},
    {name:"Shoulder CARs", reps:"5 per lato", note:"scapola co
